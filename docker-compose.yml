version: '2'

services:
   sogo:
#      if you want to build your own image
#      build: 
#         context: .
#         args:
#            - version=2.3.16
#     if you want to use builded image
      image: julienfastre/sogo:3.1
      links: 
         - db
      volumes:
         - /usr/local/lib/GNUstep/SOGo/WebServerResources/
         - /path/to/my/sogo.conf:/etc/sogo/sogo.conf
   db:
      image: postgres:9.5
      ports:
         - "5432"
   memcached:
      image: memcached:1.4-alpine
   nginx:
      image: nginx
      links:
         - sogo
      volumes_from:
         - sogo:ro
      ports:
         - "8080:80"
      volumes: 
         - ./nginx.conf:/etc/nginx/nginx.conf:ro
      
